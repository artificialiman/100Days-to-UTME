<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>JAMB Practice Test - GrantApp AI</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="quiz-styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="quiz-body">
    
    <!-- Fixed Header with Timer -->
    <header class="quiz-header">
        <div class="quiz-header-container">
            <!-- Left: Subject Info -->
            <div class="quiz-header-left">
                <button class="btn-icon" id="menuBtn" aria-label="Menu">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="subject-info">
                    <div class="subject-name" id="subjectName">Physics</div>
                    <div class="subject-meta">Question <span id="currentQuestionNum">1</span> of <span id="totalQuestions">35</span></div>
                </div>
            </div>
            
            <!-- Center: Timer (Most Prominent) -->
            <div class="quiz-timer-container">
                <div class="timer-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="timer-display" id="timerDisplay">15:00</div>
                <div class="timer-progress-ring">
                    <svg width="60" height="60">
                        <circle cx="30" cy="30" r="26" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="4"/>
                        <circle id="timerProgressCircle" cx="30" cy="30" r="26" fill="none" stroke="var(--accent)" 
                                stroke-width="4" stroke-dasharray="163.36" stroke-dashoffset="0" 
                                transform="rotate(-90 30 30)" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            
            <!-- Right: Actions -->
            <div class="quiz-header-right">
                <button class="btn-icon" id="calculatorBtn" aria-label="Calculator">
                    <i class="fas fa-calculator"></i>
                </button>
                <button class="btn btn-sm btn-danger" id="submitBtn">
                    Submit Test
                </button>
            </div>
        </div>
    </header>

    <!-- Main Quiz Container -->
    <div class="quiz-container">
        
        <!-- Sidebar: Question Navigator (Desktop/Tablet) -->
        <aside class="quiz-sidebar" id="quizSidebar">
            <div class="sidebar-header">
                <h3>Question Navigator</h3>
                <button class="btn-icon btn-close-sidebar" id="closeSidebar" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="sidebar-stats">
                <div class="stat-item">
                    <div class="stat-value" id="answeredCount">0</div>
                    <div class="stat-label">Answered</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="unansweredCount">35</div>
                    <div class="stat-label">Unanswered</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="flaggedCount">0</div>
                    <div class="stat-label">Flagged</div>
                </div>
            </div>
            
            <div class="question-palette" id="questionPalette">
                <!-- Question buttons will be generated by JS -->
            </div>
            
            <div class="sidebar-legend">
                <div class="legend-item">
                    <span class="legend-dot answered"></span>
                    <span>Answered</span>
                </div>
                <div class="legend-item">
                    <span class="legend-dot current"></span>
                    <span>Current</span>
                </div>
                <div class="legend-item">
                    <span class="legend-dot flagged"></span>
                    <span>Flagged</span>
                </div>
                <div class="legend-item">
                    <span class="legend-dot unanswered"></span>
                    <span>Unanswered</span>
                </div>
            </div>
        </aside>

        <!-- Main Question Area -->
        <main class="quiz-main">
            <!-- Question Card -->
            <div class="question-card" id="questionCard">
                <div class="question-header">
                    <div class="question-number">
                        Question <span id="questionNumber">1</span>
                    </div>
                    <button class="btn-flag" id="flagBtn" aria-label="Flag question">
                        <i class="far fa-flag"></i>
                        <span>Flag</span>
                    </button>
                </div>
                
                <div class="question-text" id="questionText">
                    Loading question...
                </div>
                
                <div class="options-container" id="optionsContainer">
                    <!-- Options will be generated by JS -->
                </div>

                <!-- Explanation (Hidden until review mode) -->
                <div class="question-explanation hidden" id="questionExplanation">
                    <div class="explanation-header">
                        <i class="fas fa-lightbulb"></i>
                        <span>Explanation</span>
                    </div>
                    <div class="explanation-content" id="explanationContent"></div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="quiz-navigation">
                <button class="btn btn-secondary" id="prevBtn" disabled>
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                
                <button class="btn btn-secondary" id="clearBtn">
                    <i class="fas fa-eraser"></i>
                    Clear Response
                </button>
                
                <button class="btn btn-primary" id="nextBtn">
                    Next
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </main>
    </div>

    <!-- Mobile Question Palette (Bottom Sheet) -->
    <div class="mobile-palette-trigger" id="mobilePaletteBtn">
        <i class="fas fa-th"></i>
        <span>Questions</span>
    </div>

    <!-- Modals -->
    
    <!-- Submit Confirmation Modal -->
    <div class="modal-overlay hidden" id="submitModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Submit Test?</h3>
                <button class="btn-icon" id="closeSubmitModal" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="submit-summary">
                    <div class="summary-item">
                        <span class="summary-label">Total Questions:</span>
                        <span class="summary-value" id="modalTotalQuestions">35</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Answered:</span>
                        <span class="summary-value answered-text" id="modalAnsweredCount">0</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Unanswered:</span>
                        <span class="summary-value warning-text" id="modalUnansweredCount">35</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Time Remaining:</span>
                        <span class="summary-value" id="modalTimeRemaining">15:00</span>
                    </div>
                </div>
                <div class="warning-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>You cannot change your answers after submission.</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelSubmitBtn">
                    Cancel
                </button>
                <button class="btn btn-danger" id="confirmSubmitBtn">
                    <i class="fas fa-check"></i>
                    Submit Test
                </button>
            </div>
        </div>
    </div>

    <!-- Calculator Modal -->
    <div class="modal-overlay hidden" id="calculatorModal">
        <div class="modal calculator-modal">
            <div class="modal-header">
                <h3>Calculator</h3>
                <button class="btn-icon" id="closeCalculatorModal" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="calculator">
                    <input type="text" class="calculator-display" id="calcDisplay" value="0" readonly>
                    <div class="calculator-buttons">
                        <button class="calc-btn" data-action="clear">C</button>
                        <button class="calc-btn" data-action="delete">←</button>
                        <button class="calc-btn" data-action="divide">÷</button>
                        <button class="calc-btn" data-action="multiply">×</button>
                        
                        <button class="calc-btn" data-value="7">7</button>
                        <button class="calc-btn" data-value="8">8</button>
                        <button class="calc-btn" data-value="9">9</button>
                        <button class="calc-btn" data-action="subtract">−</button>
                        
                        <button class="calc-btn" data-value="4">4</button>
                        <button class="calc-btn" data-value="5">5</button>
                        <button class="calc-btn" data-value="6">6</button>
                        <button class="calc-btn" data-action="add">+</button>
                        
                        <button class="calc-btn" data-value="1">1</button>
                        <button class="calc-btn" data-value="2">2</button>
                        <button class="calc-btn" data-value="3">3</button>
                        <button class="calc-btn calc-equals" data-action="equals" style="grid-row: span 2;">=</button>
                        
                        <button class="calc-btn" data-value="0" style="grid-column: span 2;">0</button>
                        <button class="calc-btn" data-value=".">.</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Time's Up Modal -->
    <div class="modal-overlay hidden" id="timeUpModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Time's Up!</h3>
            </div>
            <div class="modal-body">
                <div class="time-up-message">
                    <i class="fas fa-hourglass-end"></i>
                    <p>Your test time has expired. Your answers have been automatically submitted.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="viewResultsBtn">
                    View Results
                </button>
            </div>
        </div>
    </div>

    <!-- Load in correct order -->
    <script src="question-parser.js"></script>
    <script src="quiz-launcher.js"></script>
    <script src="quiz-app.js"></script>
</body>
</html>
